!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Papyros=t():e.Papyros=t()}(self,(function(){return(()=>{var e={487:(e,t,r)=>{var n,o;self,e.exports=(n=r(137),o=r(375),(()=>{"use strict";var e={272:e=>{e.exports=o},746:e=>{e.exports=n}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,r),i.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var i={};return(()=>{r.r(i),r.d(i,{InterruptError:()=>o,NoChannelError:()=>a,SyncClient:()=>s,syncExpose:()=>u});var e=r(746),t=r(272),n=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{u(n.next(e))}catch(e){i(e)}}function s(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))};class o extends Error{constructor(){super(...arguments),this.type="InterruptError"}}class a extends Error{constructor(){super(...arguments),this.type="NoChannelError"}}class s{constructor(e,t){this.workerCreator=e,this.channel=t,this.state="idle",this._messageId="",this._start()}interrupt(){return n(this,void 0,void 0,(function*(){"idle"!==this.state&&(this._messageId?yield this._writeMessage({interrupted:!0}):this.interrupter?yield this.interrupter():(this.terminate(),this._start()))}))}call(e,...r){return n(this,void 0,void 0,(function*(){if("idle"!==this.state)throw new Error(`State is ${this.state}, not idle`);let n=!0;this.state="running";const o=this,i=(e,t)=>{n&&"init"!==t&&(o._messageId=e,"reading"===t?o.state="awaitingMessage":"slept"===t&&o._messageId===e&&(o._messageId=""))};this._interruptPromise=new Promise(((e,t)=>this._interruptRejector=t));try{return yield Promise.race([e(this.channel,t.proxy(i),...r),this._interruptPromise])}finally{n=!1,this._reset()}}))}writeMessage(e){return n(this,void 0,void 0,(function*(){if("awaitingMessage"!==this.state)throw new Error("Not waiting for message");yield this._writeMessage({message:e})}))}terminate(){var e;null===(e=this._interruptRejector)||void 0===e||e.call(this,new o("Worker terminated")),this.workerProxy[t.releaseProxy](),this.worker.terminate(),delete this.workerProxy,delete this.worker}_writeMessage(t){return n(this,void 0,void 0,(function*(){const{_messageId:r}=this;if(!r)throw new Error("No messageId set");this.state="running",this._messageId="",yield(0,e.writeMessage)(this.channel,t,r)}))}_start(){this._reset(),this.worker=this.workerCreator(),this.workerProxy=t.wrap(this.worker)}_reset(){this.state="idle",this._messageId="",delete this._interruptPromise,delete this._interruptRejector}}function u(t){return function(r,i,...s){return n(this,void 0,void 0,(function*(){function n(t,n){if(!r)throw new a;const s=(0,e.uuidv4)();i(s,t);const u=(0,e.readMessage)(r,s,n);if(u){const{message:e,interrupted:t}=u;if(t)throw new o;return e}"sleeping"===t&&i(s,"slept")}return yield i("","init"),t({channel:r,readMessage:()=>n("reading"),syncSleep(e){e>0&&n("sleeping",{timeout:e})}},...s)}))}}})(),i})())},13:function(e,t,r){var n,o;o=this,n=function(){return function(e){"use strict";var t=e&&e.I18n||{},r=Array.prototype.slice,n=function(e){return("0"+e.toString()).substr(-2)},o=function(e,t){return d("round",e,-t).toFixed(t)},i=function(e){var t=typeof e;return"function"===t||"object"===t},a=function(e){return"function"==typeof e},s=function(e){return null!=e},u=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)},l=function(e){return"string"==typeof e||"[object String]"===Object.prototype.toString.call(e)},c=function(e){return"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)},p=function(e){return!0===e||!1===e},f=function(e){return null===e},d=function(e,t,r){return void 0===r||0==+r?Math[e](t):(t=+t,r=+r,isNaN(t)||"number"!=typeof r||r%1!=0?NaN:(t=t.toString().split("e"),+((t=(t=Math[e](+(t[0]+"e"+(t[1]?+t[1]-r:-r)))).toString().split("e"))[0]+"e"+(t[1]?+t[1]+r:r))))},h=function(e,t){return a(e)?e(t):e},m=function(e,t){var r,n;for(r in t)t.hasOwnProperty(r)&&(n=t[r],l(n)||c(n)||p(n)||u(n)||f(n)?e[r]=n:(null==e[r]&&(e[r]={}),m(e[r],n)));return e},g={day_names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],abbr_day_names:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],month_names:[null,"January","February","March","April","May","June","July","August","September","October","November","December"],abbr_month_names:[null,"Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],meridian:["AM","PM"]},y={precision:3,separator:".",delimiter:",",strip_insignificant_zeros:!1},v={unit:"$",precision:2,format:"%u%n",sign_first:!0,delimiter:",",separator:"."},b={unit:"%",precision:3,format:"%n%u",separator:".",delimiter:""},w=[null,"kb","mb","gb","tb"],S={defaultLocale:"en",locale:"en",defaultSeparator:".",placeholder:/(?:\{\{|%\{)(.*?)(?:\}\}?)/gm,fallbacks:!1,translations:{},missingBehaviour:"message",missingTranslationPrefix:""};return t.reset=function(){var e;for(e in S)this[e]=S[e]},t.initializeOptions=function(){var e;for(e in S)s(this[e])||(this[e]=S[e])},t.initializeOptions(),t.locales={},t.locales.get=function(e){var r=this[e]||this[t.locale]||this.default;return a(r)&&(r=r(e)),!1===u(r)&&(r=[r]),r},t.locales.default=function(e){var r=[],n=[];return e&&r.push(e),!e&&t.locale&&r.push(t.locale),t.fallbacks&&t.defaultLocale&&r.push(t.defaultLocale),r.forEach((function(e){var r=e.split("-"),o=null,i=null;3===r.length?(o=[r[0],r[1]].join("-"),i=r[0]):2===r.length&&(o=r[0]),-1===n.indexOf(e)&&n.push(e),t.fallbacks&&[o,i].forEach((function(t){null!=t&&t!==e&&-1===n.indexOf(t)&&n.push(t)}))})),r.length||r.push("en"),n},t.pluralization={},t.pluralization.get=function(e){return this[e]||this[t.locale]||this.default},t.pluralization.default=function(e){switch(e){case 0:return["zero","other"];case 1:return["one"];default:return["other"]}},t.currentLocale=function(){return this.locale||this.defaultLocale},t.isSet=s,t.lookup=function(e,t){t=t||{};var r,n,o,i,a=this.locales.get(t.locale).slice();for(o=this.getFullScope(e,t);a.length;)if(r=a.shift(),n=o.split(t.separator||this.defaultSeparator),i=this.translations[r]){for(;n.length&&null!=(i=i[n.shift()]););if(null!=i)return i}if(s(t.defaultValue))return h(t.defaultValue,e)},t.pluralizationLookupWithoutFallback=function(e,t,r){var n,o,a=this.pluralization.get(t)(e);if(i(r))for(;a.length;)if(n=a.shift(),s(r[n])){o=r[n];break}return o},t.pluralizationLookup=function(e,t,r){r=r||{};var n,o,a,u,l=this.locales.get(r.locale).slice();for(t=this.getFullScope(t,r);l.length;)if(n=l.shift(),o=t.split(r.separator||this.defaultSeparator),a=this.translations[n]){for(;o.length&&(a=a[o.shift()],i(a));)0===o.length&&(u=this.pluralizationLookupWithoutFallback(e,n,a));if(null!=u)break}return null==u&&s(r.defaultValue)&&(u=i(r.defaultValue)?this.pluralizationLookupWithoutFallback(e,r.locale,r.defaultValue):r.defaultValue,a=r.defaultValue),{message:u,translations:a}},t.meridian=function(){var e=this.lookup("time"),t=this.lookup("date");return e&&e.am&&e.pm?[e.am,e.pm]:t&&t.meridian?t.meridian:g.meridian},t.prepareOptions=function(){for(var e,t=r.call(arguments),n={};t.length;)if("object"==typeof(e=t.shift()))for(var o in e)e.hasOwnProperty(o)&&(s(n[o])||(n[o]=e[o]));return n},t.createTranslationOptions=function(e,t){var r=[{scope:e}];return s(t.defaults)&&(r=r.concat(t.defaults)),s(t.defaultValue)&&r.push({message:t.defaultValue}),r},t.translate=function(e,t){t=t||{};var r,n=this.createTranslationOptions(e,t),o=e,a=this.prepareOptions(t);return delete a.defaultValue,n.some((function(t){if(s(t.scope)?(o=t.scope,r=this.lookup(o,a)):s(t.message)&&(r=h(t.message,e)),null!=r)return!0}),this)?("string"==typeof r?r=this.interpolate(r,t):u(r)?r=r.map((function(e){return"string"==typeof e?this.interpolate(e,t):e}),this):i(r)&&s(t.count)&&(r=this.pluralize(t.count,o,t)),r):this.missingTranslation(e,t)},t.interpolate=function(e,t){if(null==e)return e;t=t||{};var r,n,o,i,a=e.match(this.placeholder);if(!a)return e;for(;a.length;)o=(r=a.shift()).replace(this.placeholder,"$1"),n=s(t[o])?t[o].toString().replace(/\$/gm,"_#$#_"):o in t?this.nullPlaceholder(r,e,t):this.missingPlaceholder(r,e,t),i=new RegExp(r.replace(/{/gm,"\\{").replace(/}/gm,"\\}")),e=e.replace(i,n);return e.replace(/_#\$#_/g,"$")},t.pluralize=function(e,t,r){var n,o;return r=this.prepareOptions({count:String(e)},r),void 0===(o=this.pluralizationLookup(e,t,r)).translations||null==o.translations?this.missingTranslation(t,r):void 0!==o.message&&null!=o.message?this.interpolate(o.message,r):(n=this.pluralization.get(r.locale),this.missingTranslation(t+"."+n(e)[0],r))},t.missingTranslation=function(e,t){if("guess"===this.missingBehaviour){var r=e.split(".").slice(-1)[0];return(this.missingTranslationPrefix.length>0?this.missingTranslationPrefix:"")+r.replace(/_/g," ").replace(/([a-z])([A-Z])/g,(function(e,t,r){return t+" "+r.toLowerCase()}))}return'[missing "'+[null!=t&&null!=t.locale?t.locale:this.currentLocale(),this.getFullScope(e,t)].join(t.separator||this.defaultSeparator)+'" translation]'},t.missingPlaceholder=function(e,t,r){return"[missing "+e+" value]"},t.nullPlaceholder=function(){return t.missingPlaceholder.apply(t,arguments)},t.toNumber=function(e,t){t=this.prepareOptions(t,this.lookup("number.format"),y);var r,n,i=e<0,a=o(Math.abs(e),t.precision).toString().split("."),s=[],u=t.format||"%n",l=i?"-":"";for(e=a[0],r=a[1];e.length>0;)s.unshift(e.substr(Math.max(0,e.length-3),3)),e=e.substr(0,e.length-3);return n=s.join(t.delimiter),t.strip_insignificant_zeros&&r&&(r=r.replace(/0+$/,"")),t.precision>0&&r&&(n+=t.separator+r),n=(u=t.sign_first?"%s"+u:u.replace("%n","%s%n")).replace("%u",t.unit).replace("%n",n).replace("%s",l)},t.toCurrency=function(e,t){return t=this.prepareOptions(t,this.lookup("number.currency.format",t),this.lookup("number.format",t),v),this.toNumber(e,t)},t.localize=function(e,t,r){switch(r||(r={}),e){case"currency":return this.toCurrency(t,r);case"number":return e=this.lookup("number.format",r),this.toNumber(t,e);case"percentage":return this.toPercentage(t,r);default:var n;return n=e.match(/^(date|time)/)?this.toTime(e,t,r):t.toString(),this.interpolate(n,r)}},t.parseDate=function(e){var t,r,n;if(null==e)return e;if("object"==typeof e)return e;if(t=e.toString().match(/(\d{4})-(\d{2})-(\d{2})(?:[ T](\d{2}):(\d{2}):(\d{2})([\.,]\d{1,3})?)?(Z|\+00:?00)?/)){for(var o=1;o<=6;o++)t[o]=parseInt(t[o],10)||0;t[2]-=1,n=t[7]?1e3*("0"+t[7]):null,r=t[8]?new Date(Date.UTC(t[1],t[2],t[3],t[4],t[5],t[6],n)):new Date(t[1],t[2],t[3],t[4],t[5],t[6],n)}else"number"==typeof e?(r=new Date).setTime(e):e.match(/([A-Z][a-z]{2}) ([A-Z][a-z]{2}) (\d+) (\d+:\d+:\d+) ([+-]\d+) (\d+)/)?(r=new Date).setTime(Date.parse([RegExp.$1,RegExp.$2,RegExp.$3,RegExp.$6,RegExp.$4,RegExp.$5].join(" "))):(e.match(/\d+ \d+:\d+:\d+ [+-]\d+ \d+/),(r=new Date).setTime(Date.parse(e)));return r},t.strftime=function(e,r,o){o=this.lookup("date",o);var i=t.meridian();if(o||(o={}),o=this.prepareOptions(o,g),isNaN(e.getTime()))throw new Error("I18n.strftime() requires a valid date object, but received an invalid date.");var a=e.getDay(),s=e.getDate(),u=e.getFullYear(),l=e.getMonth()+1,c=e.getHours(),p=c,f=c>11?1:0,d=e.getSeconds(),h=e.getMinutes(),m=e.getTimezoneOffset(),y=Math.floor(Math.abs(m/60)),v=Math.abs(m)-60*y,b=(m>0?"-":"+")+(y.toString().length<2?"0"+y:y)+(v.toString().length<2?"0"+v:v);return p>12?p-=12:0===p&&(p=12),r=(r=(r=(r=(r=(r=(r=(r=(r=(r=(r=(r=(r=(r=(r=(r=(r=(r=(r=(r=(r=(r=(r=(r=(r=(r=(r=r.replace("%a",o.abbr_day_names[a])).replace("%A",o.day_names[a])).replace("%b",o.abbr_month_names[l])).replace("%B",o.month_names[l])).replace("%d",n(s))).replace("%e",s)).replace("%-d",s)).replace("%H",n(c))).replace("%-H",c)).replace("%k",c)).replace("%I",n(p))).replace("%-I",p)).replace("%l",p)).replace("%m",n(l))).replace("%-m",l)).replace("%M",n(h))).replace("%-M",h)).replace("%p",i[f])).replace("%P",i[f].toLowerCase())).replace("%S",n(d))).replace("%-S",d)).replace("%w",a)).replace("%y",n(u))).replace("%-y",n(u).replace(/^0+/,""))).replace("%Y",u)).replace("%z",b)).replace("%Z",b)},t.toTime=function(e,t,r){var n=this.parseDate(t),o=this.lookup(e,r);if(null==n)return n;var i=n.toString();return i.match(/invalid/i)?i:o?this.strftime(n,o,r):i},t.toPercentage=function(e,t){return t=this.prepareOptions(t,this.lookup("number.percentage.format",t),this.lookup("number.format",t),b),this.toNumber(e,t)},t.toHumanSize=function(e,t){for(var r,n,o,i=1024,a=e,s=0;a>=i&&s<4;)a/=i,s+=1;return 0===s?(o=this.getFullScope("number.human.storage_units.units.byte",t),r=this.t(o,{count:a}),n=0):(o=this.getFullScope("number.human.storage_units.units."+w[s],t),r=this.t(o),n=a-Math.floor(a)==0?0:1),t=this.prepareOptions(t,{unit:r,precision:n,format:"%n%u",delimiter:""}),this.toNumber(a,t)},t.getFullScope=function(e,t){return t=t||{},u(e)&&(e=e.join(t.separator||this.defaultSeparator)),t.scope&&(e=[t.scope,e].join(t.separator||this.defaultSeparator)),e},t.extend=function(e,t){return void 0===e&&void 0===t?{}:m(e,t)},t.t=t.translate.bind(t),t.l=t.localize.bind(t),t.p=t.pluralize.bind(t),t}(o)}.call(t,r,t,e),void 0===n||(e.exports=n)},137:e=>{self,e.exports=(()=>{"use strict";var e={d:(t,r)=>{for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{serviceWorkerFetchListener:()=>i,asyncSleep:()=>a,ServiceWorkerError:()=>s,writeMessageAtomics:()=>u,writeMessageServiceWorker:()=>l,writeMessage:()=>c,makeChannel:()=>p,makeAtomicsChannel:()=>f,makeServiceWorkerChannel:()=>d,readMessage:()=>m,syncSleep:()=>g,uuidv4:()=>y});var r=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{u(n.next(e))}catch(e){i(e)}}function s(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))};const n="__SyncMessageServiceWorkerInput__",o="__sync-message-v2__";function i(){const e={},t={};return i=>{const{url:a}=i.request;return!!a.includes(n)&&(i.respondWith(function(){return r(this,void 0,void 0,(function*(){function r(e){const t={message:e,version:o};return new Response(JSON.stringify(t),{status:200})}if(a.endsWith("/read")){const{messageId:n,timeout:o}=yield i.request.json(),a=e[n];return a?(delete e[n],r(a)):yield new Promise((e=>{t[n]=e,setTimeout((function(){delete t[n],e(new Response("",{status:408}))}),o)}))}if(a.endsWith("/write")){const{message:n,messageId:o}=yield i.request.json(),a=t[o];return a?(a(r(n)),delete t[o]):e[o]=n,r({early:!a})}if(a.endsWith("/version"))return new Response(o,{status:200})}))}()),!0)}}function a(e){return new Promise((t=>setTimeout(t,e)))}class s extends Error{constructor(e,t){super(`Received status ${t} from ${e}. Ensure the service worker is registered and active.`),this.url=e,this.status=t,this.type="ServiceWorkerError",Object.setPrototypeOf(this,s.prototype)}}function u(e,t){const r=(new TextEncoder).encode(JSON.stringify(t)),{data:n,meta:o}=e;if(r.length>n.length)throw new Error("Message is too big, increase bufferSize when making channel.");n.set(r,0),Atomics.store(o,0,r.length),Atomics.store(o,1,1),Atomics.notify(o,1)}function l(e,t,n){return r(this,void 0,void 0,(function*(){yield navigator.serviceWorker.ready;const r=e.baseUrl+"/write",i=Date.now();for(;;){const u={message:t,messageId:n},l=yield fetch(r,{method:"POST",body:JSON.stringify(u)});if(200===l.status&&(yield l.json()).version===o)return;if(!(Date.now()-i<e.timeout))throw new s(r,l.status);yield a(100)}}))}function c(e,t,n){return r(this,void 0,void 0,(function*(){"atomics"===e.type?u(e,t):yield l(e,t,n)}))}function p(e={}){return"undefined"!=typeof SharedArrayBuffer?f(e.atomics):"serviceWorker"in navigator?d(e.serviceWorker):null}function f({bufferSize:e}={}){return{type:"atomics",data:new Uint8Array(new SharedArrayBuffer(e||131072)),meta:new Int32Array(new SharedArrayBuffer(2*Int32Array.BYTES_PER_ELEMENT))}}function d(e={}){return{type:"serviceWorker",baseUrl:(e.scope||"/")+n,timeout:e.timeout||5e3}}function h(e,t){return e>0?+e:t}function m(e,t,{checkInterrupt:r,checkTimeout:n,timeout:i}={}){const a=performance.now();n=h(n,r?100:5e3);const u=h(i,Number.POSITIVE_INFINITY);let l;if("atomics"===e.type){const{data:t,meta:r}=e;l=()=>{if("timed-out"===Atomics.wait(r,1,0,n))return null;{const e=Atomics.exchange(r,0,0),n=t.slice(0,e);Atomics.store(r,1,0);const o=(new TextDecoder).decode(n);return JSON.parse(o)}}}else l=()=>{const r=new XMLHttpRequest,i=e.baseUrl+"/read";r.open("POST",i,!1);const u={messageId:t,timeout:n};r.send(JSON.stringify(u));const{status:l}=r;if(408===l)return null;if(200===l){const e=JSON.parse(r.responseText);return e.version!==o?null:e.message}if(performance.now()-a<e.timeout)return null;throw new s(i,l)};for(;;){const e=u-(performance.now()-a);if(e<=0)return null;n=Math.min(n,e);const t=l();if(null!==t)return t;if(null==r?void 0:r())return null}}function g(e,t){if(e=h(e,0))if("undefined"!=typeof SharedArrayBuffer){const t=new Int32Array(new SharedArrayBuffer(Int32Array.BYTES_PER_ELEMENT));t[0]=0,Atomics.wait(t,0,0,e)}else m(t,`sleep ${e} ${y()}`,{timeout:e})}let y;return y="randomUUID"in crypto?function(){return crypto.randomUUID()}:function(){return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,(e=>{const t=Number(e);return(t^crypto.getRandomValues(new Uint8Array(1))[0]&15>>t/4).toString(16)}))},t})()},358:(e,t,r)=>{"use strict";var n;r.d(t,{BackendEventType:()=>n}),function(e){e.Start="start",e.End="end",e.Input="input",e.Output="output",e.Sleep="sleep",e.Error="error",e.Interrupt="interrupt"}(n||(n={}));n.Start,n.End,n.Input,n.Output,n.Sleep,n.Error,n.Interrupt},155:(e,t,r)=>{"use strict";r.d(t,{LogType:()=>n,papyrosLog:()=>a});var n,o=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},i=function(e,t,r){if(r||2===arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};!function(e){e[e.Debug=0]="Debug",e[e.Error=1]="Error",e[e.Important=2]="Important"}(n||(n={}));function a(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var a=e!==n.Debug;a&&(e===n.Error?console.error.apply(console,i([],o(t),!1)):console.log.apply(console,i([],o(t),!1)))}},924:(e,t,r)=>{"use strict";r.d(t,{parseData:()=>s});var n=r(13),o=r.n(n),i=(r(963),r(155)),a=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a};o().t;function s(e,t){var r=a(t.split("/"),2),n=r[0],o=r[1];switch(n){case"text":switch(o){case"plain":return e;case"json":return JSON.parse(e);case"integer":return parseInt(e);case"float":return parseFloat(e)}break;case"img":if("png;base64"===o)return e}return(0,i.papyrosLog)(i.LogType.Important,"Unhandled content type: ".concat(t)),e}},963:e=>{},375:(e,t,r)=>{"use strict";r.r(t),r.d(t,{createEndpoint:()=>o,expose:()=>l,proxy:()=>y,proxyMarker:()=>n,releaseProxy:()=>i,transfer:()=>g,transferHandlers:()=>u,windowEndpoint:()=>v,wrap:()=>p});const n=Symbol("Comlink.proxy"),o=Symbol("Comlink.endpoint"),i=Symbol("Comlink.releaseProxy"),a=Symbol("Comlink.thrown"),s=e=>"object"==typeof e&&null!==e||"function"==typeof e,u=new Map([["proxy",{canHandle:e=>s(e)&&e[n],serialize(e){const{port1:t,port2:r}=new MessageChannel;return l(e,t),[r,[r]]},deserialize:e=>(e.start(),p(e))}],["throw",{canHandle:e=>s(e)&&a in e,serialize({value:e}){let t;return t=e instanceof Error?{isError:!0,value:{message:e.message,name:e.name,stack:e.stack}}:{isError:!1,value:e},[t,[]]},deserialize(e){if(e.isError)throw Object.assign(new Error(e.value.message),e.value);throw e.value}}]]);function l(e,t=self){t.addEventListener("message",(function r(n){if(!n||!n.data)return;const{id:o,type:i,path:s}=Object.assign({path:[]},n.data),u=(n.data.argumentList||[]).map(w);let p;try{const t=s.slice(0,-1).reduce(((e,t)=>e[t]),e),r=s.reduce(((e,t)=>e[t]),e);switch(i){case"GET":p=r;break;case"SET":t[s.slice(-1)[0]]=w(n.data.value),p=!0;break;case"APPLY":p=r.apply(t,u);break;case"CONSTRUCT":p=y(new r(...u));break;case"ENDPOINT":{const{port1:t,port2:r}=new MessageChannel;l(e,r),p=g(t,[t])}break;case"RELEASE":p=void 0;break;default:return}}catch(e){p={value:e,[a]:0}}Promise.resolve(p).catch((e=>({value:e,[a]:0}))).then((e=>{const[n,a]=b(e);t.postMessage(Object.assign(Object.assign({},n),{id:o}),a),"RELEASE"===i&&(t.removeEventListener("message",r),c(t))}))})),t.start&&t.start()}function c(e){(function(e){return"MessagePort"===e.constructor.name})(e)&&e.close()}function p(e,t){return d(e,[],t)}function f(e){if(e)throw new Error("Proxy has been released and is not useable")}function d(e,t=[],r=function(){}){let n=!1;const a=new Proxy(r,{get(r,o){if(f(n),o===i)return()=>S(e,{type:"RELEASE",path:t.map((e=>e.toString()))}).then((()=>{c(e),n=!0}));if("then"===o){if(0===t.length)return{then:()=>a};const r=S(e,{type:"GET",path:t.map((e=>e.toString()))}).then(w);return r.then.bind(r)}return d(e,[...t,o])},set(r,o,i){f(n);const[a,s]=b(i);return S(e,{type:"SET",path:[...t,o].map((e=>e.toString())),value:a},s).then(w)},apply(r,i,a){f(n);const s=t[t.length-1];if(s===o)return S(e,{type:"ENDPOINT"}).then(w);if("bind"===s)return d(e,t.slice(0,-1));const[u,l]=h(a);return S(e,{type:"APPLY",path:t.map((e=>e.toString())),argumentList:u},l).then(w)},construct(r,o){f(n);const[i,a]=h(o);return S(e,{type:"CONSTRUCT",path:t.map((e=>e.toString())),argumentList:i},a).then(w)}});return a}function h(e){const t=e.map(b);return[t.map((e=>e[0])),(r=t.map((e=>e[1])),Array.prototype.concat.apply([],r))];var r}const m=new WeakMap;function g(e,t){return m.set(e,t),e}function y(e){return Object.assign(e,{[n]:!0})}function v(e,t=self,r="*"){return{postMessage:(t,n)=>e.postMessage(t,r,n),addEventListener:t.addEventListener.bind(t),removeEventListener:t.removeEventListener.bind(t)}}function b(e){for(const[t,r]of u)if(r.canHandle(e)){const[n,o]=r.serialize(e);return[{type:"HANDLER",name:t,value:n},o]}return[{type:"RAW",value:e},m.get(e)||[]]}function w(e){switch(e.type){case"HANDLER":return u.get(e.name).deserialize(e.value);case"RAW":return e.value}}function S(e,t,r){return new Promise((n=>{const o=new Array(4).fill(0).map((()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16))).join("-");e.addEventListener("message",(function t(r){r.data&&r.data.id&&r.data.id===o&&(e.removeEventListener("message",t),n(r.data))})),e.start&&e.start(),e.postMessage(Object.assign({id:o},t),r)}))}}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={exports:{}};return e[n].call(i.exports,i,i.exports,r),i.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};return(()=>{"use strict";r.r(n),r.d(n,{Backend:()=>s});var e=r(358),t=r(155),o=r(487),i=r(924),a=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},s=function(){function r(e){void 0===e&&(e=["runCode"]),this.syncExtras={},this.onEvent=function(){},this.exposeMethods(Array.from(e))}return r.prototype.syncExpose=function(){return o.syncExpose},r.prototype.exposeMethods=function(e){var t=this;e.forEach((function(e){var r=t[e];t[e]=t.syncExpose()(r.bind(t))}))},r.prototype.launch=function(t){var r=this;return this.onEvent=function(n){if(t(n),n.type===e.BackendEventType.Sleep){var o=parseInt((0,i.parseData)(n.data,n.contentType));return r.syncExtras.syncSleep(o)}if(n.type===e.BackendEventType.Input)return r.syncExtras.readMessage()},Promise.resolve()},r.convertCompletionContext=function(e,r){void 0===r&&(r=/\w*(\.)?/);var n=a(e.state.selection.ranges.map((function(t){var r=e.state.doc.lineAt(t.head);return[r.number,t.head-r.from]}))[0],2),o=n[0],i=n[1],s=e.matchBefore(r),u={explicit:e.explicit,before:s,pos:e.pos,column:i,line:o,text:e.state.doc.toString()};return(0,t.papyrosLog)(t.LogType.Debug,"Worker completion context:",u),u},r}()})(),n})()}));